<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/IT logo.jpeg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="International Tijarat - Your trusted online marketplace for fragrances, jewelry, mobile phones, accessories, wallets, watches and more. Shop premium products at best prices with fast delivery across Pakistan." />
    <meta name="keywords" content="online shopping Pakistan, perfumes, fragrances, jewelry, mobile phones, mobile accessories, wallets, watches, hoodies, men shawls, astro turf, belts, wholesale dealership" />
    <meta name="author" content="International Tijarat" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <link rel="canonical" href="https://internationaltijarat.com" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://internationaltijarat.com" />
    <meta property="og:title" content="International Tijarat - Premium Online Shopping in Pakistan" />
    <meta property="og:description" content="Shop premium fragrances, jewelry, mobile phones and more at International Tijarat. Best prices, fast delivery across Pakistan." />
    <meta property="og:image" content="https://internationaltijarat.com/IT%20logo.jpeg" />
    <meta property="og:site_name" content="International Tijarat" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://internationaltijarat.com" />
    <meta name="twitter:title" content="International Tijarat - Premium Online Shopping in Pakistan" />
    <meta name="twitter:description" content="Shop premium fragrances, jewelry, mobile phones and more at International Tijarat. Best prices, fast delivery across Pakistan." />
    <meta name="twitter:image" content="https://internationaltijarat.com/IT%20logo.jpeg" />
    
    <!-- Performance Optimization: Preconnect to external domains -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://connect.facebook.net">
    <link rel="dns-prefetch" href="https://www.facebook.com">
    
    <!-- Resource hints for API -->
    <link rel="dns-prefetch" href="https://internationaltijarat.com">
    <link rel="preconnect" href="https://internationaltijarat.com" crossorigin>
    <link rel="preconnect" href="https://internationaltijarat.com/api" crossorigin>
    
    <!-- Phase 5: Preload critical resources for sub-1-second load -->
    <!-- NOTE: Do NOT modulepreload /src/main.jsx - Vite transforms it, raw JSX has wrong MIME type -->
    <link rel="prefetch" href="/api/homepage/all-data" as="fetch" crossorigin>
    
    <title>International Tijarat - Premium Online Shopping | Fragrances, Jewelry, Mobile Phones & More</title>
    
    <!-- CRITICAL CSS - Inlined for INSTANT first paint (eliminates white screen) -->
    <style>
      /* Instant skeleton - shows your brand IMMEDIATELY */
      body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:#f8fafc;overflow-x:hidden}
      *{box-sizing:border-box}
      
      /* Instant header skeleton */
      .skeleton-header{position:fixed;top:0;left:0;right:0;height:70px;background:#1f2937;box-shadow:0 2px 8px rgba(0,0,0,.1);z-index:100;display:flex;align-items:center;justify-content:space-between;padding:0 1rem}
      .skeleton-logo{width:150px;height:40px;background:#374151;border-radius:4px;animation:pulse 1.5s ease-in-out infinite}
      .skeleton-search{flex:1;max-width:600px;height:40px;background:#374151;border-radius:20px;margin:0 2rem;animation:pulse 1.5s ease-in-out .2s infinite}
      .skeleton-icons{display:flex;gap:1rem}
      .skeleton-icon{width:24px;height:24px;background:#374151;border-radius:50%;animation:pulse 1.5s ease-in-out .4s infinite}
      
      /* Instant nav skeleton */
      .skeleton-nav{position:fixed;top:70px;left:0;right:0;height:50px;background:#fff;border-bottom:1px solid #e5e7eb;display:flex;align-items:center;gap:2rem;padding:0 1rem}
      .skeleton-nav-item{width:80px;height:20px;background:#e5e7eb;border-radius:4px;animation:pulse 1.5s ease-in-out .6s infinite}
      
      /* Instant hero skeleton */
      .skeleton-hero{margin-top:120px;width:100%;height:400px;background:#e5e7eb;position:relative;overflow:hidden}
      .skeleton-hero::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,transparent 0,rgba(255,255,255,.3) 50%,transparent 100%);animation:shimmer 2s infinite}
      
      /* Product grid skeleton */
      .skeleton-products{max-width:1400px;margin:2rem auto;padding:0 1rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem}
      .skeleton-product{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.08)}
      .skeleton-product-img{width:100%;aspect-ratio:1;background:#e5e7eb;position:relative;overflow:hidden}
      .skeleton-product-img::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent 0,rgba(255,255,255,.4) 50%,transparent 100%);animation:shimmer 2s infinite}
      .skeleton-product-text{padding:1rem}
      .skeleton-title{height:20px;background:#e5e7eb;border-radius:4px;margin-bottom:.5rem;animation:pulse 1.5s ease-in-out infinite}
      .skeleton-price{height:16px;width:60%;background:#e5e7eb;border-radius:4px;animation:pulse 1.5s ease-in-out .2s infinite}
      
      /* Animations */
      @keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}
      @keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
      
      /* Hide skeleton when React loads */
      #skeleton-loader{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9999;background:#f8fafc;transition:opacity .3s ease-in-out}
      #skeleton-loader.hidden{opacity:0;pointer-events:none}
      
      /* Fade in real content - keep hidden until fully loaded */
      #root{opacity:0;transition:opacity .5s ease-in-out;min-height:100vh}
      #root.loaded{opacity:1}
    </style>
    
    <!-- Google Tag Manager - Aggressively Deferred for Phase 2.1 Performance -->
    <script>
    // Phase 2.1: Wait for LCP + 5 seconds OR genuine user engagement
    var gtmLoaded = false;
    var lcpDetected = false;
    var lcpTime = 0;
    
    function loadGTM() {
      if (gtmLoaded) return;
      gtmLoaded = true;
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-K55PGMBD');
      console.log('✅ GTM loaded after LCP optimization');
    }
    
    // Wait for LCP event using PerformanceObserver
    if ('PerformanceObserver' in window) {
      try {
        var lcpObserver = new PerformanceObserver(function(list) {
          var entries = list.getEntries();
          var lastEntry = entries[entries.length - 1];
          lcpDetected = true;
          lcpTime = lastEntry.renderTime || lastEntry.loadTime;
          
          // Load GTM 5 seconds AFTER LCP completes
          setTimeout(function() {
            if (!gtmLoaded) loadGTM();
          }, 5000);
        });
        lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
      } catch (e) {
        // Fallback if PerformanceObserver fails
        window.addEventListener('load', function() {
          setTimeout(loadGTM, 5000);
        });
      }
    } else {
      // Fallback for older browsers: load after page load + 5 seconds
      window.addEventListener('load', function() {
        setTimeout(loadGTM, 5000);
      });
    }
    
    // OR load on genuine user engagement (scroll beyond 50% or 10s on page)
    var scrollEngaged = false;
    var timeEngaged = false;
    
    window.addEventListener('scroll', function() {
      if (scrollEngaged || gtmLoaded) return;
      var scrollPercent = (window.scrollY + window.innerHeight) / document.body.scrollHeight;
      if (scrollPercent > 0.5) {
        scrollEngaged = true;
        loadGTM();
      }
    }, { passive: true });
    
    // Time-based engagement: 10 seconds on page
    setTimeout(function() {
      timeEngaged = true;
      if (!gtmLoaded) loadGTM();
    }, 10000);
    </script>
    <!-- End Google Tag Manager -->
 
    <!-- Meta Pixel Code - Aggressively Deferred for Phase 2.1 Performance -->
    <script>
    // Initialize fbq queue immediately (non-blocking)
    window.fbq = window.fbq || function() {
      (window.fbq.q = window.fbq.q || []).push(arguments);
    };
    window.fbq.q = [];
    window.fbq.loaded = !0;
    window.fbq.version = '2.0';
    
    var fbLoaded = false;
    var fbLcpDetected = false;
    
    function loadFacebookPixel() {
      if (fbLoaded) return;
      fbLoaded = true;
      var script = document.createElement('script');
      script.async = true;
      script.defer = true;
      // NOTE: Do NOT use type='module' - fbevents.js is NOT an ES module
      // Using module mode forces CORS, and Facebook's CDN doesn't send Access-Control-Allow-Origin
      script.src = 'https://connect.facebook.net/en_US/fbevents.js';
      document.head.appendChild(script);
      
      // Initialize after script loads
      script.onload = function() {
        fbq('init', '1122233005539042');
        fbq('track', 'PageView');
        console.log('✅ Facebook Pixel loaded after LCP optimization');
      };
    }
    
    // Wait for LCP event using PerformanceObserver
    if ('PerformanceObserver' in window) {
      try {
        var fbLcpObserver = new PerformanceObserver(function(list) {
          var entries = list.getEntries();
          fbLcpDetected = true;
          
          // Load Facebook Pixel 5 seconds AFTER LCP completes
          setTimeout(function() {
            if (!fbLoaded) loadFacebookPixel();
          }, 5000);
        });
        fbLcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
      } catch (e) {
        // Fallback if PerformanceObserver fails
        window.addEventListener('load', function() {
          setTimeout(loadFacebookPixel, 5000);
        });
      }
    } else {
      // Fallback for older browsers: load after page load + 5 seconds
      window.addEventListener('load', function() {
        setTimeout(loadFacebookPixel, 5000);
      });
    }
    
    // OR load on genuine user engagement (scroll beyond 50% or 10s on page)
    var fbScrollEngaged = false;
    
    window.addEventListener('scroll', function() {
      if (fbScrollEngaged || fbLoaded) return;
      var scrollPercent = (window.scrollY + window.innerHeight) / document.body.scrollHeight;
      if (scrollPercent > 0.5) {
        fbScrollEngaged = true;
        loadFacebookPixel();
      }
    }, { passive: true });
    
    // Time-based engagement: 10 seconds on page
    setTimeout(function() {
      if (!fbLoaded) loadFacebookPixel();
    }, 10000);
    </script>
    <!-- End Meta Pixel Code -->
    
    <!-- Structured Data for Google -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "International Tijarat",
      "url": "https://internationaltijarat.com",
      "description": "Premium online marketplace for fragrances, jewelry, mobile phones, accessories and more in Pakistan",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://internationaltijarat.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "International Tijarat",
      "url": "https://internationaltijarat.com",
      "logo": "https://internationaltijarat.com/IT%20logo.jpeg",
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Customer Service",
        "url": "https://internationaltijarat.com/contact"
      },
      "sameAs": [
        "https://www.facebook.com/internationaltijarat"
      ]
    }
    </script>
  </head>
  <body>
    <!-- INSTANT SKELETON LOADER - Shows your brand structure immediately (NO white screen!) -->
    <div id="skeleton-loader">
      <!-- Header skeleton -->
      <div class="skeleton-header">
        <div class="skeleton-logo"></div>
        <div class="skeleton-search"></div>
        <div class="skeleton-icons">
          <div class="skeleton-icon"></div>
          <div class="skeleton-icon"></div>
          <div class="skeleton-icon"></div>
        </div>
      </div>
      
      <!-- Nav skeleton -->
      <div class="skeleton-nav">
        <div class="skeleton-nav-item"></div>
        <div class="skeleton-nav-item"></div>
        <div class="skeleton-nav-item"></div>
        <div class="skeleton-nav-item"></div>
        <div class="skeleton-nav-item"></div>
      </div>
      
      <!-- Hero skeleton -->
      <div class="skeleton-hero"></div>
      
      <!-- Products grid skeleton -->
      <div class="skeleton-products">
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
        <div class="skeleton-product">
          <div class="skeleton-product-img"></div>
          <div class="skeleton-product-text">
            <div class="skeleton-title"></div>
            <div class="skeleton-price"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Hide skeleton and show real content when React loads -->
    <script>
      (function() {
        var skeletonHidden = false;
        var minDisplayTime = 800; // Show skeleton for at least 800ms (faster perception)
        var startTime = Date.now();
        
        // Hide skeleton as soon as React starts rendering REAL CONTENT (not just loading state)
        var checkReactInterval = setInterval(function() {
          var root = document.getElementById('root');
          var elapsedTime = Date.now() - startTime;
          
          if (root && root.children.length > 0 && !skeletonHidden) {
            // Check if we have actual content (not just a loading spinner)
            var hasHeader = root.querySelector('header');
            var hasNav = root.querySelector('nav');
            var hasMain = root.querySelector('main');
            var hasContent = root.querySelector('[class*="product"]') || 
                           root.querySelector('[class*="card"]') ||
                           root.querySelector('[class*="banner"]');
            var hasSubstantialText = root.innerText.length > 100;
            
            var hasRealContent = (hasHeader || hasNav) && (hasMain || hasContent || hasSubstantialText);
            
            // Only hide skeleton if we have real content AND minimum time has passed
            if (hasRealContent && elapsedTime >= minDisplayTime) {
              skeletonHidden = true;
              var skeleton = document.getElementById('skeleton-loader');
              if (skeleton) {
                skeleton.classList.add('hidden');
                setTimeout(function() {
                  skeleton.remove();
                }, 300);
              }
              root.classList.add('loaded');
              clearInterval(checkReactInterval);
            }
          }
        }, 100); // Check every 100ms
        
        // Fallback: remove skeleton after 5 seconds even if React hasn't fully loaded
        setTimeout(function() {
          if (!skeletonHidden) {
            skeletonHidden = true;
            var skeleton = document.getElementById('skeleton-loader');
            if (skeleton) {
              skeleton.classList.add('hidden');
              setTimeout(function() {
                skeleton.remove();
              }, 300);
            }
            document.getElementById('root').classList.add('loaded');
            clearInterval(checkReactInterval);
          }
        }, 5000);
      })();
    </script>
    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K55PGMBD"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Meta Pixel Code (noscript) -->
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1122233005539042&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code (noscript) -->
    
    <noscript>
      <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
        <h1>International Tijarat - Premium Online Shopping</h1>
        <p>Your trusted online marketplace for fragrances, jewelry, mobile phones, accessories, and more.</p>
        <p>Please enable JavaScript to view this website.</p>
        <p>Browse our categories:</p>
        <ul style="list-style: none; padding: 0;">
          <li><a href="/category-group/fragrances">Fragrances</a></li>
          <li><a href="/category-group/jewellery">Jewellery</a></li>
          <li><a href="/category-group/mobile-phones">Mobile Phones</a></li>
          <li><a href="/category-group/mobile-accessories">Mobile Accessories</a></li>
          <li><a href="/category-group/wallets">Wallets</a></li>
          <li><a href="/category-group/watches">Watches</a></li>
        </ul>
      </div>
    </noscript>
    
    <div id="root"></div>
    
    <!-- Phase 2.3: Module/NoModule Pattern for Modern JS -->
    <!-- Modern browsers get optimized ES2020 code -->
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Legacy browsers get polyfilled version (only if needed) -->
    <!-- Note: Vite automatically handles this with legacy plugin if configured -->
    <script nomodule>
      // Fallback message for very old browsers
      if (!('Promise' in window)) {
        document.getElementById('root').innerHTML = 
          '<div style="padding:20px;text-align:center;font-family:Arial">'+
          '<h2>Browser Update Required</h2>'+
          '<p>Please upgrade to a modern browser to use this website.</p>'+
          '<p>Recommended: Chrome, Firefox, Safari, or Edge (latest versions)</p>'+
          '</div>';
      }
    </script>
  </body>
</html>
